{% extends "fr_legacy_base.html" %}

{% block breadcrumbs %}
<div class="container">
  <div class="breadcrumbs">
    <a id="breadcrumb_home" href="/fr_index">Home</a> / <a id="breadcrumb_search" href="/fr_search">Recherche</a>
      <div id="language" style="text-align: right;  float:right; margin-right: 20px;">
        <a href="/language?language='fr'&redirect='/search'">Français</a> / <a href="/language?language='en'&redirect='/search'">English </a>
      </div>
  </div>
</div>
{% endblock %}

{% block content %}
<div class="top">
  <h1>Recherche</h1>
    <p>Rechercher par l'un des sept services fournis, nom de l'organisation, l'emplacement, la population cible ou à l'aide de mots-clés. Le résultat sera résumée, cartographié et disponible pour imprimer ou par courriel.</p>
    <!-- 1st Row Starts -->
<form action="/search" method="post" id="main-search-form">
            <!--input type="submit" value="Soumettre"-->
<!-- containing form for search -->
    <div id="search-container" align="center">
    <div class="search" align="center">
            <label>Mots-clés</label>
            <input type="text" name="keywords" value="" id="keywords" placeholder="enter search terms here...">

    </div>
    <div class="search" align="center">
        <label>Service</label>
        <select name="service">
            <option value="" selected>Sélectionnez Service</option>
            <optgroup label="Program 1">
                <option value="">Service 1</option>
                <option value="">Service 2</option>
                <option value="">Service 3</option>
            </optgroup>
            <optgroup label="Program 2">
                <option value="">Service 1</option>
                <option value="">Service 2</option>
                <option value="">Service 3</option>
            </optgroup>
            <optgroup label="Program 3">
                <option value="">Service 1</option>
                <option value="">Service 2</option>
                <option value="">Service 3</option>
            </optgroup>
        </select>
    </div>
    <div class="search" align="center">
        <label>Department</label>
        <select name="region">
            <option value="" selected>Sélectionnez Department</option>
            <optgroup label="Department 1">
                <option value="">Commune 1</option>
                <option value="">Commune 2</option>
                <option value="">Commune 3</option>
            </optgroup>
            <optgroup label="Department 2">
                <option value="">Commune 1</option>
                <option value="">Commune 2</option>
                <option value="">Commune 3</option>
            </optgroup>
            <optgroup label="Department 3">
            <option value="">Commune 1</option>
            <option value="">Commune 2</option>
            <option value="">Commune 3</option>
            </optgroup>
            <option value="none">N/A</option>
        </select>
    </div>
    </div> <!-- //.search-container -->
    <!-- // 1st Row  -->

    <!-- 2nd Row Starts -->
    <div id="search-container" align="center">
    <div class="search" align="center">
        <label>Age Min</label>
        <select name="age">
            <option value="" selected>Sélectionnez Gamme</option>
            <option value="">Ans 0-3</option>
            <option value="">Ans 4-10</option>
            <option value="">Ans 11-14</option>
            <option value="">Ans 15-18</option>
            <option value="none">P/A</option>
        </select>
    </div>
    <div class="search" align="center">
        <label>Age Max:</label>
        <select name="age">
            <option value="" selected>Select Gamme</option>
            <option value="">Age 0-3</option>
            <option value="">Age 4-10</option>
            <option value="">Age 11-14</option>
            <option value="">Age 15-18</option>
            <option value="none">N/A</option>
        </select>
    </div>
    <div class="search" align="center">
        <label>Gender Recherche</label>
        <select name="gender">
            <option value="" selected>Sélectionner une option</option>
            <option {% if gender == "male" %} selected {% endif %} value="male">Garçons</option>
            <option {% if gender == "female" %} selected {% endif %}  value="female">Filles</option>
            <option value="none">Les garçons et les filles</option>
            <option value="none">P/A</option>
        </select>
    </div>
    </div><!-- //.search-container -->
    <!-- // 2nd Row  -->

            <div class="map-cta">
                <input type="submit" class="btn" value="Recherche">
            </div>

</form>
</div>
<hr/>
<div class="mid" id="search-mid">
<div id="results-container" align="center"> 
<h2>Résultats de la recherche</h2>
    <p>Les résultats de la recherche apparaîtront sur la carte et les résultats ci-dessous . En cliquant sur une entrée , il se concentrera sur le site d'une organisation sur la carte.
</p>
<div align="center">
<div id="map" class="search-map"></div>
<div class="results-box">
  {% for record in records %}
    <div class="result">
        <p>Nom de l'organisation: {{ record.nom_de_lorganisation }}</p>
        <p>Adresse: {{ record.adresse }}</p>
        <p>Numéro de téléphone: {{ record.telephone }}</p>
        <p>Services:</p>
    </div>
  {% endfor %}
</div>    
</div><!-- //.results-box -->
    <ul class="pagination" align="center">
        <li><a href="">Dernière Page</a></li>
        <li><a href="">Page Suivante</a></li>
        <li class="icon"><a href=""><img src="../../assets/img/csv-icon-128x128.png" width="25" height="25" /></a></li>
        <li class="icon"><a href=""><img src="../../assets/img/printer.png" width="25" height="25" /></a></li>
    </ul>img/printer.png
    <p class="search-again">Si vous souhaitez effectuer une nouvelle recherche , il suffit de remplir les champs ci-dessus à nouveau , et cliquez sur le bouton Rechercher.</p>
    <p class="search-again">Pour plus d'informations concernant les définitions des services, <a href="#">s'il vous plaît cliquez ici.</a></p>    
</div><!-- //#results-container -->
</div> <!-- //.mid -->
<div class="bottom">
</div>
<!-- Scripts Go Here -->
<script>
  var map = L.map('map').setView([18.533, -72.333], 8);
    map.scrollWheelZoom.disable();

  // add an OpenStreetMap tile layer
  L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
  }).addTo(map);



  {% for record in records %}
  // add a marker in the given location, attach some popup content to it and open the popup
    console.log("record");
    L.marker([{{ record.latitude }}, {{ record.longitude }}]).addTo(map)
        .bindPopup("{{ record.nom_de_lorganisation }}")
        .openPopup();

  {% endfor %}
</script>
{% endblock %}
